## vim

### 打开 vim

```bash
$ which vim
$ vim draft.txt
```

### vim模式

普通模式下，按下 **i** 键进入插入模式插入内容，再按下 **ESC** 回到普通模式；普通模式下，按下冒号键（`:`）进入命令行模式，按下**v**键进入可视模式。

命令行模式下保存缓冲区数据的命令：

- `q` - 如果未修改缓冲区数据，退出

- `q! `- 取消所有对缓冲区数据的修改并退出
- `w filename` - 将文件保存到另一个文件中
- `wq` - 将缓冲区数据保存到文件中并退出



### 使用 vim 编辑文件

| 移动光标（普通模式） | 描述                                           |
| -------------------- | ---------------------------------------------- |
| h、j 、k、l          | 左移一个字符，下移一行，上移一行，右移一个字符 |
| Ctrl + B / F         | 上/下翻一屏                                    |
| G                    | 移到缓冲区的最后一行（注意大写G）              |
| num G                | 移动到缓冲区中的第num行（注意大写G）           |
| gg                   | 移到缓冲区的第一行                             |

| 编辑数据（普通模式） | 描 述                                           |
| -------------------- | ----------------------------------------------- |
| x                    | 删除当前光标所在位置的字符                      |
| dd                   | 删除当前光标所在行                              |
| dw                   | 删除当前光标所在位置的单词                      |
| d$                   | 删除当前光标所在位置至行尾的内容                |
| J                    | 删除当前光标所在行行尾的换行符（拼接行）        |
| u                    | 撤销前一编辑命令                                |
| a                    | 在当前光标后追加数据                            |
| A                    | 在当前光标所在行行尾追加数据                    |
| r char               | 用char替换当前光标所在位置的单个字符            |
| R text               | 用text覆盖当前光标所在位置的数据，直到按下ESC键 |



#### y 复制 p 粘贴

使用命令`y`（yank）复制，然后把光标移动到想放置文本的地方，输入`p`命令粘贴。可以在`y`后面使用第二字符（和`d`命令相同）。`yw` - 复制一个单词，`y$` - 复制到行尾。

可以用**可视模式**选取要复制的文本。

- 移动光标到要开始复制的位置，并按下**v**键，进入可视模式

- 移动光标来覆盖想要复制的文本（向下移动几行可以复制多行文本）

- 在覆盖了要复制的文本后，按**y**键来激活复制命令

- 移动光标到你要放置的位置，使用**p**命令来粘贴

  

#### 斜线（/）查找

要输入一个查找字符串，就按下斜线（`/`）键。光标会跑到消息行，然后vim会显示出斜线。在输入你要查找的文本后，按下回车键。要继续查找同一个单词，按下斜线键，然后按回车键。或者使用n键，表示下一个（next）。



#### 替换

```bash
:s/old/new/
:s/old/new/g
:n,ms/old/new/g
:%s/old/new/g
:%s/old/new/gc
```

